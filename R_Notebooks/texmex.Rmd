---
title: "Test Package texmex"
author: "Mongi Nouira"
output: github_document
---

```{r, include=FALSE}
library(htmltools)

knitr::knit_hooks$set(imgcenter = function(before, options, envir){
  if (before) {
    HTML("<p align='center'>")
  } else {
    HTML("</p>")
  }
})

rmd_filename = stringr::str_remove(knitr::current_input(), "\\.Rmd")
knitr::opts_chunk$set(
  fig.path = stringr::str_c(file.path("cache", rmd_filename), "/")
)

knitr::opts_chunk$set(
  echo=FALSE, cache=FALSE, imgcenter=TRUE,
  fig.align="center", dpi=150, fig.width=8, fig.height=6
)

# Color Map
c1 = "#636EFA"
c2 = "#EF553B"
c3 = "#00CC96"

library("texmex")
```


```{r}
df = read.csv("~/Documents/GitHub/PDM_2022/data/data1.csv")

# Data
ll = -100*sapply(df[seq(2,ncol(df))], function(x) log(x[-1])-log(x[-length(df$Date)]))
ll = data.frame(ll)

# Sectors
sectors = sapply(colnames(ll)[1:12], function(x) substring(x,5))
sectors = as.vector(sectors)
colnames(ll) = sectors
```


```{r}
cmod <- mex(ll, which="Market", mth=2, dqu=0.9)
summary(cmod)
```


```{r, fig.height=4}
par(pty="s", mfcol=c(1,3))
plot(cmod)
```


```{r}
#mod <- evm(ll,)
```




